"use strict";const e=require("../common/vendor.js"),t=(t,n,o)=>{const i=e.index.getStorageSync("iwtoken");if(i||t.includes("login"))return new Promise(((r,a)=>{e.index.request({url:"https://api.itwray.com/iw-eat"+t,method:n,data:o,header:{iwtoken:i},success:t=>{const n=t.data;if(null!=n)return 401==n.code?(e.index.removeStorageSync("iwtoken"),void e.index.reLaunch({url:"/pages/login/login"})):void(200==n.code?r(n):e.index.showToast({icon:"none",title:n.message}));e.index.showToast({icon:"exception",title:"数据加载异常"})},fail:e=>{a(e)}})}));e.index.reLaunch({url:"/pages/login/login"})};const n=new class{async get(e){try{return await t(e,"get",{})}catch(n){throw n}}async delete(e){try{return await t(e,"delete",{})}catch(n){throw n}}async post(e,n){try{return await t(e,"post",n)}catch(o){throw o}}};exports.http=n;
