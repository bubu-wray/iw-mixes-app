"use strict";const e=require("../../common/vendor.js"),n=require("../../stores/cart.js"),t=require("../../api/request.js");if(!Array){(e.resolveComponent("uni-datetime-picker")+e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-data-checkbox")+e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-forms")+e.resolveComponent("uni-section")+e.resolveComponent("uni-col")+e.resolveComponent("uni-row"))()}Math||((()=>"../../uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox.js")+(()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms/uni-forms.js")+(()=>"../../uni_modules/uni-section/components/uni-section/uni-section.js")+(()=>"../../uni_modules/uni-row/components/uni-col/uni-col.js")+(()=>"../../uni_modules/uni-row/components/uni-row/uni-row.js"))();const a={__name:"cart-confirm",setup(a){const i=n.useCartStore(),o=e.ref({});u();const s=e.ref([{text:"任意时间",value:0},{text:"早餐",value:1},{text:"午餐",value:2},{text:"晚餐",value:3}]);function u(){o.value={mealDate:new Date,mealTime:0,diners:"2",remark:"",mealMenuList:[]}}function l(){null!=o.value.mealDate&&""!==o.value.mealDate?null!=o.value.mealTime&&""!==o.value.mealTime?!function(e){if(/^\d+$/.test(e)){const n=parseInt(e,10);if(n>=0&&n<99)return!0}return!1}(o.value.diners)?e.index.showToast({icon:"none",title:"用餐人数格式有误"}):(o.value.mealMenuList=[],i.cartItems.length>0&&i.cartItems.forEach((e=>{o.value.mealMenuList.push({dishesId:e.id,dishesName:e.dishesName})})),t.http.post("/meal/add",o.value).then((n=>{u(),i.initCart(),e.index.switchTab({url:"/pages/meal/meal"})}))):e.index.showToast({icon:"none",title:"用餐时间不能为空"}):e.index.showToast({icon:"none",title:"用餐日期不能为空"})}return(n,t)=>e.e({a:e.o((e=>o.value.mealDate=e)),b:e.p({type:"date","return-type":"string",modelValue:o.value.mealDate}),c:e.p({label:"用餐日期",required:!0}),d:e.o((e=>o.value.mealTime=e)),e:e.p({localdata:s.value,modelValue:o.value.mealTime}),f:e.p({label:"用餐时间",required:!0}),g:e.o((e=>o.value.diners=e)),h:e.p({type:"number",placeholder:"请输入用餐人数",modelValue:o.value.diners}),i:e.p({label:"用餐人数"}),j:e.o((e=>o.value.remark=e)),k:e.p({type:"textarea",placeholder:"请输入用餐备注",modelValue:o.value.remark}),l:e.p({label:"备注"}),m:e.sr("baseForm","3b92a490-1,3b92a490-0"),n:e.p({modelValue:o.value,"label-width":100}),o:e.p({title:"基础信息"}),p:e.unref(i).cartItems.length>0},e.unref(i).cartItems.length>0?{q:e.f(e.unref(i).cartItems,((n,t,a)=>({a:n.dishesImage,b:n.dishesName,c:"3b92a490-12-"+a+",3b92a490-11-"+a,d:e.t(n.dishesName),e:e.t(n.difficultyFactor),f:e.t(n.useTime),g:e.t(n.prices),h:"3b92a490-14-"+a+",3b92a490-13-"+a,i:"3b92a490-13-"+a+",3b92a490-11-"+a,j:"3b92a490-11-"+a+",3b92a490-10",k:n.id}))),r:e.p({span:12}),s:e.p({span:12})}:{},{t:e.p({title:"菜品信息"}),v:e.t(e.unref(i).computedDishPrices()),w:e.p({span:8}),x:e.t(e.unref(i).computedDishUseTime()),y:e.p({span:8}),z:e.o((e=>l())),A:e.p({span:8})})}};wx.createPage(a);
