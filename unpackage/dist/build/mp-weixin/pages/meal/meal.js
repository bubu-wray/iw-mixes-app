"use strict";const e=require("../../common/vendor.js"),t=require("../../api/request.js");if(!Array){(e.resolveComponent("uni-row")+e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list")+e.resolveComponent("uni-load-more"))()}Math||((()=>"../../uni_modules/uni-row/components/uni-row/uni-row.js")+(()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../uni_modules/uni-list/components/uni-list/uni-list.js")+(()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js"))();const o={__name:"meal",setup(o){const n=e.ref("more"),i=e.reactive({dto:{currentPage:1,pageSize:10},list:[]});function l(){n.value="loading",t.http.post("/meal/page",i.dto).then((e=>{const t=e.data;t.records&&t.records.length==i.dto.pageSize?n.value="more":n.value="noMore",i.list=[...i.list,...t.records]})).catch((e=>{n.value="more"})).finally((()=>{e.index.stopPullDownRefresh()}))}function a(e){const t=new Date,o=new Date(e);return o.getDate()===t.getDate()&&o.getMonth()===t.getMonth()&&o.getFullYear()===t.getFullYear()}function r(){i.dto.currentPage=1,i.list=[],l()}return e.onShow((()=>{r()})),e.onPullDownRefresh((()=>{r()})),e.onReachBottom((()=>{i.dto.currentPage++,l()})),(t,o)=>({a:e.f(i.list,((t,o,n)=>({a:e.t(a(t.mealDate)?"今天":t.mealDate),b:"7266c54d-2-"+n+",7266c54d-1-"+n,c:e.t(t.mealTimeDesc),d:"7266c54d-3-"+n+",7266c54d-1-"+n,e:e.t(t.diners),f:"7266c54d-4-"+n+",7266c54d-1-"+n,g:e.t(t.remark),h:"7266c54d-5-"+n+",7266c54d-1-"+n,i:t.id,j:e.o((o=>function(t){e.index.navigateTo({url:"/pages/meal/meal-detail?id="+t.id})}(t)),t.id),k:"7266c54d-1-"+n+",7266c54d-0"}))),b:e.p({clickable:!0}),c:e.p({status:n.value})})}};wx.createPage(o);
