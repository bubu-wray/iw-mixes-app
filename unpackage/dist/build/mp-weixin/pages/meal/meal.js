"use strict";const e=require("../../common/vendor.js"),o=require("../../api/request.js");if(!Array){(e.resolveComponent("uni-row")+e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list")+e.resolveComponent("uni-section")+e.resolveComponent("uni-load-more"))()}Math||((()=>"../../uni_modules/uni-row/components/uni-row/uni-row.js")+(()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../uni_modules/uni-list/components/uni-list/uni-list.js")+(()=>"../../uni_modules/uni-section/components/uni-section/uni-section.js")+(()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js"))();const n={__name:"meal",setup(n){const t=e.ref("more"),i=e.reactive({dto:{currentPage:1,pageSize:5},list:[]});function s(){t.value="loading",o.http.post("/meal/page",i.dto).then((e=>{const o=e.data;o.records&&o.records.length>0?t.value="more":t.value="noMore",i.list=[...i.list,...o.records],console.log(i.list)})).catch((e=>{t.value="more"})).finally((()=>{e.index.stopPullDownRefresh()}))}function l(){e.index.navigateTo({url:"/pages/meal/meal-add"})}return e.onShow((()=>{s()})),e.onPullDownRefresh((()=>{console.log("refresh"),i.dto.currentPage=1,i.list=[],s()})),e.onReachBottom((()=>{i.dto.currentPage++,s()})),(o,n)=>({a:e.o(l),b:e.f(i.list,((o,n,t)=>({a:e.t(o.mealDate),b:"7266c54d-3-"+t+",7266c54d-2-"+t,c:e.t(o.mealTime),d:"7266c54d-4-"+t+",7266c54d-2-"+t,e:e.t(o.diners),f:"7266c54d-5-"+t+",7266c54d-2-"+t,g:e.t(o.remark),h:"7266c54d-6-"+t+",7266c54d-2-"+t,i:o.id,j:e.o((e=>function(e){console.log(e)}(o)),o.id),k:"7266c54d-2-"+t+",7266c54d-1"}))),c:e.p({ellipsis:0,title:"测试标题",clickable:!0}),d:e.p({title:"点餐记录",type:"line"}),e:e.p({status:t.value})})}};wx.createPage(n);
